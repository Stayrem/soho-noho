function animateImage(){var e={movement:{imgWrapper:{translation:{x:10,y:10,z:30},rotation:{x:0,y:-10,z:0},reverseAnimation:{duration:200,easing:"easeOutQuad"}},lines:{translation:{x:10,y:10,z:[0,70]},rotation:{x:0,y:0,z:-2},reverseAnimation:{duration:2e3,easing:"easeOutExpo"}},caption:{rotation:{x:0,y:0,z:2},reverseAnimation:{duration:200,easing:"easeOutQuad"}},overlay:{translation:{x:10,y:-10,z:0},rotation:{x:0,y:0,z:2},reverseAnimation:{duration:2e3,easing:"easeOutExpo"}},shine:{translation:{x:100,y:100,z:0},reverseAnimation:{duration:200,easing:"easeOutQuad"}}}};new TiltFx(document.querySelectorAll(".tilter.tilter--1")[0],e),new TiltFx(document.querySelectorAll(".tilter.tilter--1")[1],e)}function galleryFilterInit(){$(".gallery__list-link").on("click",function(){var e=this.getAttribute("rel");"group1"===e?$(".group2,.group3").animate({opacity:0},300,function(){$(".group2,.group3").css({display:"none"}),$(".group1").css({display:"block",opacity:"1"}),$(".grid-gallery").masonry()}):"group2"===e?$(".group1,.group3").animate({opacity:0},300,function(){$(".group1,.group3").css({display:"none"}),$(".group2").css({display:"block",opacity:"1"}),$(".grid-gallery").masonry()}):"group3"===e?$(".group2,.group1").animate({opacity:0},300,function(){$(".group2,.group1").css({display:"none"}),$(".group3").css({display:"block",opacity:"1"}),$(".grid-gallery").masonry()}):($(".group1,.group3,.group2").css({display:"block",opacity:"1"}),$(".grid-gallery").masonry())})}function moveToForm(){$(".pdf-btn").on("click",function(){$("#pdf").prop("checked",!0),$([document.documentElement,document.body]).animate({scrollTop:$(".contact").offset().top},1500)}),$("show-btn").on("click",function(){$([document.documentElement,document.body]).animate({scrollTop:$(".show-btn").offset().top},1500),$("#pdf").prop("checked",!1)})}function setPhoneMask(){$(function(){$(".bfh-phone").mask("+7(999) 999-99-99")}),document.querySelector(".bfh-phone").addEventListener("focus",function(){moveCaretToStart(this)})}function moveCaretToStart(e){if(e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.select()}}function moveCaretToEnd(e){if(e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}}function moveCaretToStart(e){e.selectionStart&&(e.setSelectionRange(0,0),e.focus())}function moveCaretToEnd(e){if(e.selectionStart){var t=e.value.length;e.setSelectionRange(t,t),e.focus()}}function formValidator(){$(".form").validate({rules:{name:{required:!0,minlength:3},email:{required:!0,email:!0},tel:{required:!0,minlength:10}}})}function scrollAmimationInit(){AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:120,delay:0,duration:400,easing:"ease",once:!1,mirror:!1,anchorPlacement:"top-bottom"})}function onePageScrollInit(){$.scrollify({section:".page-scroll",sectionName:"section-name",interstitialSection:".page-scroll--half",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,standardScrollElements:"",setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,scrollBar:!1,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}})}function masonryGalleryMaker(){var e=$(".grid-gallery").masonry({itemSelector:".grid-gallery-item",percentPosition:!0,columnWidth:".grid-sizer"});e.imagesLoaded().progress(function(){e.masonry()})}function openMobileMenu(){$("#nav-icon1,#nav-icon2,#nav-icon3,#nav-icon4").click(function(){$(this).toggleClass("open"),$(".mobile-menu").toggleClass("mobile-menu--open")})}function setAppartmentSlider(){$(".owl-carousel").owlCarousel({loop:!1,margin:10,nav:!0,autoWidth:!0,center:!0,nav:!1,loop:!0,responsive:{0:{items:1},600:{items:3},1000:{items:5}}}).on("translated.owl.carousel",function(e){setSliderBtns()})}function appsFilterBtnEvent(){$(".appartments__filter-item").click(function(){var e=this.getAttribute("data-filter-slider"),t=document.querySelectorAll(".appartments__slider .owl-item .slide-item"),a=0;for(let l=0;l<t.length&&a<=0;l++)t[l].classList.contains(e)&&(a++,$(".owl-carousel").trigger("to.owl.carousel",l+1))})}function setSliderBtns(){$(".appartments__filter-item").removeClass("active");var e=$(".appartments__slider .owl-item.active.center .slide-item");e.hasClass("double")?$(".appartments__filter-item:nth-child(1)").addClass("active"):e.hasClass("tripple")?$(".appartments__filter-item:nth-child(2)").addClass("active"):e.hasClass("quadro")?($(".appartments__filter-item:nth-child(3)").addClass("active"),console.log("quadro")):e.hasClass("penthaus")&&$(".appartments__filter-item:nth-child(4)").addClass("active")}function initItemMap(){if(null!=document.querySelector(".map")){markerImage="https://newflat.nikaestate.ru/wp-content/uploads/2019/05/marker-new.png";var e={lat:55.764139,lng:37.60063},t=new google.maps.Map(document.querySelector(".map"),{center:e,scrollwheel:!1,zoom:15,disableDefaultUI:!0,styles:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#212921"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"transit.station",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#292c3a"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]});new google.maps.Marker({position:e,map:t,icon:markerImage})}if(null!=document.querySelector(".front__map")){markerImage="https://newflat.nikaestate.ru/wp-content/uploads/2019/05/marker-new.png";e={lat:55.764139,lng:37.60063},t=new google.maps.Map(document.querySelector(".front__map"),{center:e,scrollwheel:!1,zoom:15,disableDefaultUI:!0,styles:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#212921"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"transit.station",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#292c3a"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]}),new google.maps.Marker({position:e,map:t,icon:markerImage})}}function changerValidateMessage(){jQuery.extend(jQuery.validator.messages,{required:"Это поле обязательно для ввода",remote:"Please fix this field.",email:"Неправильный email адрес",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Неправильный формат",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:jQuery.validator.format("Please enter no more than {0} characters."),minlength:jQuery.validator.format("Вы ввели меньше {0} символов."),rangelength:jQuery.validator.format("Please enter a value between {0} and {1} characters long."),range:jQuery.validator.format("Please enter a value between {0} and {1}."),max:jQuery.validator.format("Please enter a value less than or equal to {0}."),min:jQuery.validator.format("Please enter a value greater than or equal to {0}.")})}document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll("img.lazy")),t=[].slice.call(document.querySelectorAll(".lazy-background")),a=[].slice.call(document.querySelectorAll("[data-bg]"));if("IntersectionObserver"in window){let l=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){let t=e.target;t.src=t.dataset.src,t.srcset=t.dataset.srcset,t.classList.remove("lazy"),l.unobserve(t)}})});e.forEach(function(e){l.observe(e)});let r=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("visible"),r.unobserve(e.target))})});t.forEach(function(e){r.observe(e)});let o=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){let t=e.target;t.style.backgroundImage="url("+t.dataset.bg+")",o.unobserve(t)}})});a.forEach(function(e){o.observe(e)})}else e.forEach(function(e){e.src=e.dataset.src,e.srcset=e.dataset.srcset}),t.forEach(function(e){e.classList.add("visible")}),a.forEach(function(e){e.style.backgroundImage="url("+e.dataset.bg+")"})}),document.addEventListener("DOMContentLoaded",function(){initItemMap(),setAppartmentSlider(),setSliderBtns(),openMobileMenu(),masonryGalleryMaker(),scrollAmimationInit(),appsFilterBtnEvent(),formValidator(),changerValidateMessage(),setPhoneMask(),moveToForm(),galleryFilterInit(),animateImage()});